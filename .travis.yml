language: ruby
bundler_args: --without kitchen_vagrant --without development
rvm:
- 2.1.0
cache: bundler
before_install:
- echo -n $DO_KEY_CHUNK_{0..999} >> ~/.ssh/id_do.base64
- cat ~/.ssh/id_do.base64 | tr -d ' ' | base64 --decode > ~/.ssh/id_do.pem
- echo `md5sum ~/.ssh/id_do.pem`
- ls -la ~/.ssh
script:
- bundle exec kitchen diagnose --all
- bundle exec kitchen test $KITCHEN_INSTANCE
after_script:
- grep . -Hn .kitchen/logs/*
- bundle exec kitchen destroy
env:
  global:
  - KITCHEN_YAML='.kitchen.cloud.yml'
  - DIGITAL_OCEAN_SSH_KEY_PATH='~/.ssh/id_do.pem'
  - DIGITAL_OCEAN_SSH_KEY_IDS='135373, 135365'
  - secure: kb7kk/1eobLPM4/gI7pGmAaWfglDo0xrkKAXbaS5cFdYIon2PMBSgnk821DNnkh7kW9ERUTUNEdyqDDAG3EUj+h7CPHSQEOQmRRp6v6UsKqcTb8pV0q8zNhnFDjNP5DkQ7lLST2OghLd9evsnlqUtFEfUfMx4Cvp1KKnXYPkrTQ=
  - secure: DozWXmEPFHFKxzwtwuYLL7VK3lI2XjGjTGdQ+S5vq+d6SEcVlGMxkyU+fmAfC75QaA9HU17fwsY/g+cHmP1X3OE5SuRYLAmLUKx9Dzm7F4uIwfZ7lMn9A8OmQP6spkLzaU7oLolpdQQ3DrzcCefpM7lOh8z4ghL+ha/XCeix1JM=
  - secure: UQ4is3pjaJFdpmPZgXScRFdtsK8qOOfCGAXVAru9ae7iJf0kDjAvTHn25wmzdM2UwD9H0rEzYW92xebHDgiXFkmaxYLfbt1HT+YQ72lepO7OWgZo9CcHn0RHaBVImaQX1FIuHSvpxgw8s7s4ZfVbchxKCVUJRuyjAn0DYqbtMG8=
  - secure: I4JAdlAQauU6of/pEjYIWnOSmyfy+QG4/XUjojEipsVSPbXidBNkR6PemEQm1I5LI0mOQxNdQXk1OMyMhJuw6ugvTvo6FjfeVYs3ggsbmhzqX4HbVOBOl9cs7FY4wKo+JJigGUg+bCLCYgLvB/Bz3QMUbRWSFkRqTKrD2vg57gY=
  - secure: dhx5+NaXIYhUb0a/QAHGd7PjtZ+prz1/QCTpA+WdAgXrsJv3vtuzFIDlysGywzh4b1/rGhhjLNeahKe46Waxe9uOPvL1mepDPGCcWwDZjBV7VOT6jcMPXKcVDP69eA7XYxnXyzwsB648H7YSzHtu7OcXPRWX9zxE7OnNZudr1EM=
  - secure: FLOFKigC/JRYezXLwf0VFbA/TWed/wa+kOrkJbKMbCzUvy6z/CpFeClIrX8gSG1oA0Q9Uo1oaxbSYKjWVXdPwe0AxBUgaZyX8mdTMLtZ+DQ/uJyg49llYLm0OpuyrJtWTykFy5PpaZ742Z9l8yzTVwv6fqMddZwP5+bVbj6XKBk=
  - secure: HoNFIBI+SRl++sMiJJWfo5Gw6JyPyesWBczBhJgJ2IH2PzFpyYKkM4v6d0NE5p6OS7wKKKSQHXw2kW11W6b37f9em9q31UDZ9PHvbZMr/GaevaL5yltVXRmipZeVeGi0cd40lKOwwDA1Yr8RP0PZeA0IQcZzDclOm/T3eKPfLpw=
  - secure: UFLeQS3ReuuhzhbM6VHHM2/oTpBANrzgtB340paA+hYp57LdUdrulKBZvq02U179avfkgFFYgkfNNYvwrCfR8PsPfufkb5tvt3mz1R9EUiNrEvN7Ai2wnHd/29Uh66qPQmBz3zbuzwuxTCtRnXX5lpb9/7OtthC5urPgcNV9jeY=
  - secure: HUQp7v7klEnxwZeO55ijNSVzy4VFdC7UvpAzfch3euW60ErrvheTqnd6XBVmNL89ckAo8LLAJMwAc1AQIEY/AqODrcFbKLeRbI4FFsbXeaWKQuhfBVuq9MDVtdRrxMQvZilvB9+YFFHa7IABXXh3aPZ/jVlAiIhUIRzOc26qUYA=
  - secure: OY91u0hkIWtvijgN/Z27KieX5QV0vMXZ0vq6A10TornHDKtMKCpDTV7y2poaCOdRIfdJC/OvurYavDYsg6vH60BfPq+EPzie7MMBPGI4zAer8Bd9GA1fYtzJuZOfHEgmoPzYjoLf1MTThCQwkhwfkmk1934kA4+/aVZqinUYbx4=
  - secure: Da1jJTSI/wHFCkmNe9Ftsha+6Eu81gh2T+apadwqzJcgiJ9poYy/MuOrQSRjiAnqd18GTL17MoUD0ozQaRS6pJQXtyRjsE0XWCS8nPd3plJok0fbUYTMfQpuedWRu8Z4T80TkDbF0/s1N6qN4D2I/VD7Gn1n+tmpo4WtIi4O424=
  - secure: guMadGd74F0WK10PuPBFmdZHDgs6DXISaccGKRFx/nvRiHbwMJE9x+FqpzHpFSDjTn9GgQQI44Q6NN6gIC2ZtSBaO70bTtX2KUrfap6y6ylo2r8NgWinXrQ/f0u2H34+yMJ/RkavnjvXGX9t/uTmbtq9WuB8bM8YhGBtdLnu9Kw=
  - secure: ZzLrnWB4G2pHQf797x/0pswDp3nEW/iIGS5kGRmYzbLRFiGDZXsu9J82qYYuHeTW9dIgSrpzWJ7tXzrS2Q7yp/QUBLEAaf0fODh4tCbpGNAAfmd9mywguWJFNbO5AAIOKdQEU20/7KCzf5GRGWWwT74eRTYsnYzkfohGkFCnFNU=
  - secure: EXgk737e2bZlVp4d74bEfkSwbW5S72xA7/lMFvDQntQAJHYhA/NX+9OcXqPfAya5hf97iqkKQGs/hBrOwn1pnEfg58uHEa1kDBMwwsbxmBgIfKdT/0fEvxm1RqIHYurB6zDUzm8hbk3UtqajnIRbwkp+KMZJxcNBg88ggqHUGUU=
  - secure: VTg5nG+sQTxCi8Q8rgcX9J6/jkd6JXkFbsECTFxrx4ape4f6rYzgTp+Jw21VR3tv0Dv2heWQ/D193tD6rpA7vGfYUhWLt4p9OOOau/3zKQ06FuvUPFPY10gihm66Qq8Kyg9rtZm6bourhQYJ4xGx9I/Acmf+5FKKEWydorpMeDY=
  - secure: gzleemBswJpcjuI9EphCrzdOTmybXkO2xJUEM+f79CBTjD1CobaIx+jNMmMQ6fWKvoEvIdBlyJdPh9EFk6aPXEVb5xYh7IpQySquQBFNiWaNRvcs71/mNicHMPn2o/TNCuwkdJ9bbUg18lmgDLbPDAIeoSns3NYrsdpe1BGtcoE=
  - secure: Svsz3C9P4N65ujtLaDBgiyb4+6qrM2Um00z/H21oYPUpRpmPDlu7JkUv7zJKX7Mqk34KseIEz8m+JRbXmZFY+5YgMTi6yHwupvc6QYVBokj5JNkly4GSG8KYdMKSQ54gxeotD4p1/2Ym5ekoOixRCn9guyMxyMvxAmhTeda7f14=
  - secure: hWAFhWoy3od3YfO4rMvwTlQWvf3mA6Ed9YrXfpxRUMySGHH9EOkS7lHNKRdGtrSZBuUiVYuZ1aaXEezoTTPiS9ZVolEm2V0Tdf7q4ydXYnqHCrsAdY5jYATWkqUWM6WfB3fV1ezSF56HkNFjORK+NIuIbrq+/+QGWLlmZz3Xk6k=
  - secure: T3MOL8vdWftfqN7YRqtC6YSdh1IpwWkjES9HiW42ZOg3WOfnfro3bHffMFmxKf2ebHy97T4gxwh9F2vnAGogeqfdzcHcQDF7wcW1EeYy5yrMIgZONdgVBTAI3JltyZSochs4F141VsZA+5LHbF8nxSNITOX80F+84t85rGVi38U=
  - secure: YFgm1Qsu/MfM/Qsb73Y63MEV59383MS8ysKV6P3AM119mSouBQkOwcS0P12ZCAisJjRy29I2af6OFcDl17koCNs7I8TmQWovtW+V4rpokptTO2cjEHxSDJaLUzKAnMCRKVwd4XTVAOfNhfdbnrQjGmkNYAxJ+Ivh+GVr8Zqy4eQ=
  - secure: Bm8BJemI0K3Hp7z+LbcPcYU0StzNVYqZe7wZMG308QaYWB6/2q1x2armYxZf0KsKNtN78RiduP9/1H2NVmbs+mlkniH4LlJCNK34hMMAPh/l13jYTns9U0ojSarqP5XkKmNuAYUgryHniutnVmWKQGy8HKJx8/vsKQ83FVmR0Dk=
  - secure: XGixswc9t70zYnrBbVaI+sKVQ1hN4Q+jiN0K3TKJ3qoID+yTale3XViC+vALc6P0ET8YVtw9gigT5M5Ii/PlPYAnlllUUCJ3ewQx/aAWMG73hZlW1GFmudzHqDOYxUhU+2ZbnFpxCtbOfmuax1yvPpLE2clAMSaFmaOMQg/TODw=
  - secure: Br1pMyDiAAjSVVcYOqRye0nMs+MwXul1dNCSdLQOaZUM+k66TAuG5AwGNxqkxllTcaNIFHn12fWY1RJBakI5HJn8NQ5pJb9lxqJBvYfPZ5a26i87vFskkLf0ogeYUJBuNRodgri6Ey0gZ2oYKzbzmXUrmM9IECEpErbKlZHscdw=
  - secure: d95271aGIY8eEHOoKRmlNa7KJRVqellabVtvkQX9z980YRS/pv6tkcECINWQiucn2l8g9Hu+mttAFrxbn8M1PaF+NMOAgcjffcSp16bGJ2Vg3RPxEN3lsH96yDEAjrreaZE8csFTCF4m5+hECzdV3M8O4G9ulVdIvqkGqYe/crk=
  - secure: Xb0SGfq2z6lvDMEwkxAOazZoKuX5Hn5pnaT80ij37rBnQm5MBfBaPdG2+pv9CWbj25C9ocYbJ01OOKJ360Vtk9vIyFzUnoJz5CzKmuBUxNiEuDZSLrzen/2abr37jVpyioJsG7RFTzjP2F7COU4aMTsa0hZx3Rwp0gw4yt7ZX3M=
  - secure: Y6n1hUoLQyyHTNLJqV2P2YBZi9bUMpdyQhyGdeuUFFOYLWMYaI+yWmqPh3+Nr8k0+lK51/bRmo26B+IgIenH5QubrVS8SSYMWdvRo4SYc+nWZ3GULm7KDMF52+ZKGsxA0bg5y4F8hK1aeQGihLs3+wNKTeskLxexvnPAEPxHSto=
  - secure: Nn2U3R7+Q2opoY1Kc2Inu2pY2I15mJUyuXxqu4PRfK+ozsW6uJyYhMjoJXkcbq4WkUZN+PS5dTPDxJdZhQmfJXzqUwt37HtRYNMngzbSgTXT0GAfGSEtOBw46A3a4rOZHv9zcNueeXFMRxFwz6OcG5Nb9RBhE4/zXtnFrPEhiEU=
  - secure: exKBxOmo4YAS9t61RBs6jLZNx6jh2efxWMetou1tkGwzd4aYTLDDrcanLVPKUxGsgZz4JQ499B5RoDvzAl6V9cDwVuZLLWyFnf5LaUtNimiXSXu7/bOFRBumfxWXOveWwmjOrvcgCtmuuwa/5dHg9MhV59oDnvVSL7SGDcZYahc=
  - secure: F8DSDDPGVyHoVyTRGj8xih0r+35mlgSRPassZYMBDF0mCtkBZSmu7bm4Hg2+VFK6q+o+bU1W6XrSaqt8CXfB9MFIqytmqYLx76Ybs3E14L04Scbajto9mSfgMytf06T8mi1lDeQIBIyJ1SC05XtFXIyxoC2ATOlTDdP65ZrjULs=
  - secure: Yohz6Kslz03KfcxTYxrImQApKrJUmcOLFitCuSzn0zlifUfKQaBve8Q3tq8BbVK9M2UccjEztFAMwPar6piazhZrKlv/fRzxXMhIf7GfuBrasUPP5FI50nqp/ryou6p0JdeiLANXycZm/jkYcxYSXgE/7Yj0W8OKTB1yTrIq7+w=
  - secure: VUqGTzj5wtivZdwqKWldecRfi9xZvV3Y7KYOcUlgA24/oTxVBMnA279wmILKotgi3Qa9fef3S/hLwuqSXng1LeAybbOeAmoSnyveFePR1suodCwJa0bZmwU6ORLnWX1bP0H9UovesYBrXkCujPKeRp/PfDCKeh4hgtOTLr7GcHg=
  - secure: F1MvdRJJJqZeJkpK629nbsW7KKu/CuYjdjWWca/5TX5ttQzhN8uzOhFT18MZVR3zDBJEncFEK4Omc/W2ZyxmVup6GXLqWpGStjYdsGiVgW/5iMubVTSzXM7VDDfA9k5Vy9BNuD7GHIlaD+QH6FR5S8THbACCic34D8+UsNRLiWE=
  - secure: cURCNvBlbpxobGL1w4nbafGoHekRH8CVCN7x1SA9ny7VFiw8QSFIomHdRriG2fJcbW4Jh4qjIQbvp3mEdXX96g+ANwdxXPXXPFFDN8Elgha5xKFJdnk+0YApx8tP+qKu2FXGPjF3RCExTi8cMQEv18/EU6gJdRuc9jJwaaEblfY=
  - secure: fwaHgRJkZCxwfxPuOrHetW8coquQiNoWTD9mbRQ6U4N8radZOPK5B/yg44Ft3bX90izaT+Lcri1kaYKctmnGehifs2VQfggGEHmjr7BjIWbP1sma6BAlveUoclSnU32SLVShFLa0QsE/ZZS2NgldrE+znqaAUe2Z8i0KeG9/F8M=
  - secure: PenDkuOCLEWldBX+WeG74cqA2fMl1dZiV91/08oanEE8NXXiyJS/zMwZgeuAq+lbUcnp6RggD7mgBTDOCgDScXgKhkTwU1pIc7T8zblSu4kUiwIwRKxUJZWrsGxDIRVuv52zr2rwV7is3yCleGZvGobTOp/ZKmtRJ1F6Y7S24js=
  - secure: JaViVicrGZ1saZBuQphyVN3UFqG6BeRJOsSwT54T3+CmuvBNnzaJ+SkCQg3OCKtcdo9F7QyX+/a08QAEXOMpHneIbz4P2q4KG4PKsyR6eVPq9v+8eS2I0Bxk+7+YzFlaGqQZPV9hW+H1p9JuA/dZaWO+wRX9txUKXIL1vu+ORRg=
  - secure: LoQyXA0ID1P2cr4UV7Y9Kiugzf8nw/8jxWfDd21uwbzOlDM6aPKUt1jI4HhBdm08cU6N0vBDP/9jVFGnl1QdF/UB77wZvYMPHw4eiNokB89TrRWPG+n+Ej7baW+Gf6UK9SL/HYczN9yW+H34ZvZBo7XeV4MeAYSU8a4UGiBihfA=
  - secure: D1eGweiqFTwoCN4c2oOsEOK8sucXoNsN+Pr7BNR6+w7CSCerQIPjTMWFWKhoVnblw3ZdneO+47Cd/R6Y5fJt4jw+intZf9BcvMRbKnpM3T2tkoKG2xrGX3C8C35gJyjhrakM10ogL6dQoICyDDse+Kq63QZrRImkaHnxfA05Hu8=
  - secure: M8KeSnRBqetYSrLFyysiJzZM94WAbq/xiSLPKdS0ORNAu9oM+h5etQe+YoHtJHdQuY93dWopeoYMXfvWQ5BoSRyWJK6r5pcyRAbSrHC6ppj19ca+RqKkGahaZqqDpL0ByTz/D0M0nhjckvWHPWJ+gccnJLI+KTB44BSe+5KuAec=
  - secure: L/s98I7yx82s14xKsucgQGKDISZBj+FXbsYlIisMzZFdI/zGOXSD78p5Asx7792AbAI4WylXru4RI75Gigf7ZmJjNN7ogAVkuTJFis8UElYBlMCYdw9/OknyzlbUpdHKisWApnOnI8uGPmh7+RRpOgNIIN+rYnfVA9CgTS9Uiok=
  - secure: iT9q5X7MWpDrKKMSjGAiyoNKvX4D5drYGsTT0mcAaa6ASLQERmO77HB9ET7utvxUV6ALCqKdQp1wvepwWU+2emMNtS95qCrA9WX+IFtY3P4TheKd3x4Vb8yt5bk/I3MQmXCZHEXnEax8iqV61RoTYkhNkSSBbHj/vKieJX7QF6E=
  matrix:
  - KITCHEN_INSTANCE='default-centos-64'
  - KITCHEN_INSTANCE='default-ubuntu-1310'
